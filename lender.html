<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Approval</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Your custom CSS -->
    <link rel="stylesheet" href="lender.css">
    <link rel="shortcut icon" href="icon.jpg" type="image/x-icon">
</head>
<body>
    <!-- Header section -->
    <header class="text-center my-5">
        <h1>Loan Details</h1>
        <!-- Loan details table -->
        <div id="loanDetails">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">Customer Name</th>
                        <th scope="col">Loan Number</th>
                        <th scope="col">Date</th>
                        <th scope="col">Due Date</th>
                        <th scope="col">Amount</th>
                        <th scope="col">Balance</th>
                        <th scope="col">Monthly EMI</th>
                        <th scope="col">Interest Date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Vimal K</td>
                        <td>123456</td>
                        <td>2024-03-15</td>
                        <td>2024-06-15</td>
                        <td>Rs 50000</td>
                        <td>Rs 20000</td>
                        <td>Rs 5000</td>
                        <td>2024-04-15</td>
                    </tr>
                    <tr>
                        <td>Sunil S</td>
                        <td>789012</td>
                        <td>2024-03-20</td>
                        <td>2024-07-20</td>
                        <td>Rs 80000</td>
                        <td>Rs 30000</td>
                        <td>Rs 6000</td>
                        <td>2024-04-20</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </header>

    <!-- Main section -->
    <main class="container">
        <h2 class="text-center mb-4">Customer Loan Requests</h2>
        <div id="customerRequests">
            <!-- Dummy customer loan requests -->
            <div class="customer-request">
                <h3>Kanaga S</h3>
                <p>Loan Amount: Rs 60000</p>
                <button class="btn btn-success approve-btn">Approve</button>
                <button class="btn btn-danger reject-btn">Reject</button>
            </div>
            <div class="customer-request">
                <h3>Bala Ganapathy</h3>
                <p>Loan Amount: Rs 45000</p>
                <button class="btn btn-success approve-btn">Approve</button>
                <button class="btn btn-danger reject-btn">Reject</button>
            </div>
        </div>
    </main>
    <script>
        // JavaScript code for handling loan approval and rejection
        document.addEventListener('DOMContentLoaded', function () {
            const approveButtons = document.querySelectorAll('.approve-btn');
            const rejectButtons = document.querySelectorAll('.reject-btn');
            const loanDetails = document.getElementById('loanDetails');
            const customerRequests = document.getElementById('customerRequests');
            let latestLoanNumber = 451235; // Initial loan number
            
            function generateLoanNumber() {
                return latestLoanNumber++; // Increment and return latest loan number
            }
    
            approveButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const customerRequest = button.parentElement;
                    const customerName = customerRequest.querySelector('h3').textContent;
                    const loanAmount = customerRequest.querySelector('p').textContent;
                    // Extract loan amount value
                    const loanAmountValue = loanAmount.split(': ')[1];
                    // Generate unique loan number
                    const loanNumber = generateLoanNumber();
                    // Append approved customer details to the loan details table
                    loanDetails.querySelector('tbody').innerHTML += `
                        <tr>
                            <td>${customerName}</td>
                            <td>${loanNumber}</td>
                            <td>2024-03-22</td>
                            <td>2024-06-22</td>
                            <td>${loanAmountValue}</td>
                            <td>${loanAmountValue}</td>
                            <td>Rs 5000</td>
                            <td>2024-04-22</td>
                        </tr>
                    `;
                    // Remove customer request from the main section
                    customerRequest.remove();
                });
            });
    
            rejectButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const customerRequest = button.parentElement;
                    customerRequest.remove();
                });
            });
        });
    </script>
</body>
</html>
